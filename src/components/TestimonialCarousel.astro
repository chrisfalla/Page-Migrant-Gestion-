---
const testimonials = [
  {
    name: 'Mariana Pérez',
    role: 'Migró a Colombia desde Perú',
    quote: 'El equipo fue impecable: claridad legal, tiempos rápidos y un acompañamiento humano de principio a fin.'
  },
  {
    name: 'Luis Andrade',
    role: 'Visa de trabajo aprobada',
    quote: 'Sentí confianza desde la primera llamada. Todo el proceso estuvo documentado y sin sorpresas.'
  },
  {
    name: 'Camila Torres',
    role: 'Regularización PPT',
    quote: 'Resolvieron mi trámite con disciplina y atención al detalle. Totalmente recomendados.'
  }
];
---

<section id="testimonios" class="py-14 bg-[#001B48] text-white reveal">
  <div class="container mx-auto px-6">
    <div class="flex flex-col lg:flex-row items-start lg:items-end justify-between gap-8 mb-12">
      <div>
        <p class="text-sm uppercase tracking-widest text-white/70">Prueba Social</p>
        <h2 class="text-4xl md:text-5xl font-bold">Historias de confianza</h2>
      </div>
      <div class="flex gap-3">
        <button class="carousel-prev w-12 h-12 rounded-full border border-white/30 text-white hover:bg-white/10 transition-colors" aria-label="Anterior">
          <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <button class="carousel-next w-12 h-12 rounded-full border border-white/30 text-white hover:bg-white/10 transition-colors" aria-label="Siguiente">
          <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>

    <div class="carousel-track flex gap-6 overflow-x-auto snap-x snap-mandatory scroll-smooth pb-6">
      {testimonials.map((item) => (
        <article class="snap-start min-w-[85%] md:min-w-[48%] lg:min-w-[32%] bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8">
          <p class="text-lg leading-relaxed mb-6">“{item.quote}”</p>
          <div class="text-white font-semibold">{item.name}</div>
          <div class="text-[#8E8E8E] text-sm">{item.role}</div>
        </article>
      ))}
    </div>
  </div>

  <script>
    const initCarousel = () => {
      const section = document.getElementById('testimonios');
      if (!section) return;
      const track = section.querySelector('.carousel-track');
      const next = section.querySelector('.carousel-next');
      const prev = section.querySelector('.carousel-prev');
      if (!track || !next || !prev) return;

      const scrollByCard = (direction: number) => {
        const card = track.querySelector('article');
        if (!card) return;
        const offset = card.getBoundingClientRect().width + 24;
        track.scrollBy({ left: direction * offset, behavior: 'smooth' });
      };

      next.addEventListener('click', () => scrollByCard(1));
      prev.addEventListener('click', () => scrollByCard(-1));
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initCarousel);
    } else {
      initCarousel();
    }
  </script>
</section>
